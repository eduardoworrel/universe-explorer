"use strict";var sunImg,mercuryImg,venusImg,earthImg,marsImg,jupiterImg,saturnImg,uranusImg,neptuneImg,rocketImg,arrowImg,G,usePlanetGrav,useCollisions,spacing,planetScale,planets,rockets,rocketCounter,launchVel,launchAngle,innerWidth=0,innerHeight=0;let earth,theSun;function start(){innerWidth=window.innerWidth,innerHeight=window.innerHeight,spacing=innerWidth/30,planets=[],rockets={},launchAngle=rocketCounter=0,G=document.getElementById("gravConst").value,usePlanetGrav=document.getElementById("gravPlanets").checked,useCollisions=document.getElementById("collisions").checked,planetScale=document.getElementById("planetScale").value,launchVel=document.getElementById("launchVel").value,loadImages(),area.start(),theSun=new sun(24,24,sunImg),new planet("Mercury",4,4,mercuryImg,.3*spacing,0),new planet("Venus",8,8,venusImg,3*spacing,0),earth=new planet("Earth",8,8,earthImg,4*spacing,0),new planet("Mars",6,6,marsImg,5*spacing,0),new planet("Jupiter",20,20,jupiterImg,7*spacing,0),new planet("Saturn",20,20,saturnImg,9*spacing,0),new planet("Uranus",16,16,uranusImg,11*spacing,0),new planet("Neptune",16,16,neptuneImg,13*spacing,0),setInterval(update,20);var e=document.getElementById("inst");e.style.display="block",document.addEventListener("keydown",function(t){32==t.which&&(new rocket(launchAngle),e.style.display="none")});const t=document.querySelector("canvas");t.addEventListener("mousedown",function(){new rocket(launchAngle),e.style.display="none"})}var area={canvas:document.createElement("canvas"),start:function(){this.canvas.width=innerWidth,this.canvas.height=innerHeight,document.body.insertBefore(this.canvas,document.body.childNodes[0])},clear:function(){var t;null!=(t=this.canvas.getContext("2d"))&&t.clearRect(0,0,this.canvas.width,this.canvas.height)}};class sun{constructor(t,e,n){this.widthFactor=t,this.heightFactor=e,this.width=this.widthFactor*planetScale,this.height=this.heightFactor*planetScale,this.mass=this.width*this.height,this.x=innerWidth/2,this.y=innerHeight/2,this.img=n;let i=area.canvas.getContext("2d");null!==i&&void 0!==i&&i.drawImage(this.img,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}update(){this.width=this.widthFactor*planetScale,this.height=this.heightFactor*planetScale;let t=area.canvas.getContext("2d");null!==t&&void 0!==t&&t.drawImage(this.img,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}}class planet{constructor(t,e,n,i,a,h){planets.push(this),this.name=t,this.widthFactor=e,this.heightFactor=n,this.width=this.widthFactor*planetScale,this.height=this.heightFactor*planetScale,this.radius=a,this.mass=this.width*this.height,this.angle=h,this.angSpeed=getAngSpeed(a),this.x=innerWidth/2+Math.cos(this.angle)*this.radius,this.y=innerHeight/2-Math.sin(this.angle)*this.radius,this.img=i;let s=area.canvas.getContext("2d");null!==s&&void 0!==s&&s.drawImage(this.img,(innerWidth-this.width)/2+this.radius,(innerHeight-this.height)/2,this.width,this.height)}update(){this.angSpeed=getAngSpeed(this.radius),this.width=this.widthFactor*planetScale,this.height=this.heightFactor*planetScale,this.angle+=this.angSpeed,this.x=innerWidth/2+Math.cos(this.angle)*this.radius,this.y=innerHeight/2-Math.sin(this.angle)*this.radius;let t=area.canvas.getContext("2d");null!==t&&void 0!==t&&t.drawImage(this.img,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}}function getAngSpeed(t){var e=G*theSun.mass;return Math.sqrt(e)*Math.pow(t,-1.5)}class rocket{constructor(t){rocketCounter++,this.id=rocketCounter,(rockets[this.id]=this).width=16,this.height=16,this.launchVel=launchVel,this.launchAngle=t;this.x=earth.x+32*Math.cos(this.launchAngle),this.y=earth.y+32*Math.sin(this.launchAngle),this.img=rocketImg;t=earth.angSpeed*earth.radius;this.xVel=-1*t*Math.sin(earth.angle)+this.launchVel*Math.cos(this.launchAngle),this.yVel=-1*t*Math.cos(earth.angle)+this.launchVel*Math.sin(this.launchAngle);let e=area.canvas.getContext("2d");null!==(e=area.canvas.getContext("2d"))&&void 0!==e&&e.save(),null!==e&&void 0!==e&&e.translate(this.x,this.y),null!==e&&void 0!==e&&e.rotate(this.launchAngle+Math.PI/2),null!==e&&void 0!==e&&e.drawImage(this.img,-this.width/2,-this.height/2,this.width,this.height),null!==e&&void 0!==e&&e.restore()}update(){let t=0,e=0;var n=theSun.x-this.x,i=theSun.y-this.y,a=G*theSun.mass*Math.pow(Math.pow(n,2)+Math.pow(i,2),-1.5);if(t+=a*n,e+=a*i,usePlanetGrav)for(var h of planets)n=h.x-this.x,i=h.y-this.y,a=G*h.mass*Math.pow(Math.pow(n,2)+Math.pow(i,2),-1.5),t+=a*n,e+=a*i;if(this.xVel+=t,this.yVel+=e,this.x+=this.xVel,this.y+=this.yVel,(this.x<0||this.x>innerWidth||this.y<0||this.y>innerHeight)&&delete rockets[this.id],useCollisions){Math.abs(theSun.x-this.x)<theSun.width/2&&Math.abs(theSun.y-this.y)<theSun.height/2&&delete rockets[this.id];for(var s of planets)Math.abs(s.x-this.x)<s.width/2&&Math.abs(s.y-this.y)<s.height/2&&delete rockets[this.id]}let l=area.canvas.getContext("2d");null!==l&&void 0!==l&&l.save(),null!==l&&void 0!==l&&l.translate(this.x,this.y),null!==l&&void 0!==l&&l.rotate(this.launchAngle+Math.PI/2),null!==l&&void 0!==l&&l.drawImage(this.img,-this.width/2,-this.height/2,this.width,this.height),null!==l&&void 0!==l&&l.restore()}}function update(){(G=document.getElementById("gravConst").value)<0&&(G=0),usePlanetGrav=document.getElementById("gravPlanets").checked,useCollisions=document.getElementById("collisions").checked,planetScale=document.getElementById("planetScale").value,launchVel=document.getElementById("launchVel").value,area.clear(),theSun.update();for(var t of planets)t.update();for(var e in rockets)rockets[e].update();launchAngle+=.02,drawArrow()}function drawArrow(){var t=8*planetScale,e=earth.x+Math.cos(launchAngle)*t,t=earth.y+Math.sin(launchAngle)*t;let n=area.canvas.getContext("2d");null!==n&&void 0!==n&&n.save(),null!==n&&void 0!==n&&n.translate(e,t),null!==n&&void 0!==n&&n.rotate(launchAngle+Math.PI/2),null!==n&&void 0!==n&&n.drawImage(arrowImg,-8,-8,16,16),null!==n&&void 0!==n&&n.restore()}function loadImages(){(sunImg=document.createElement("img")).src="images/sun.png",(mercuryImg=document.createElement("img")).src="images/mercury.png",(venusImg=document.createElement("img")).src="images/venus.png",(earthImg=document.createElement("img")).src="images/earth.png",(marsImg=document.createElement("img")).src="images/mars.png",(jupiterImg=document.createElement("img")).src="images/jupiter.png",(saturnImg=document.createElement("img")).src="images/saturn.png",(uranusImg=document.createElement("img")).src="images/uranus.png",(neptuneImg=document.createElement("img")).src="images/neptune.png",(rocketImg=document.createElement("img")).src="images/rocket.png",(arrowImg=document.createElement("img")).src="images/arrow.png"}start();
